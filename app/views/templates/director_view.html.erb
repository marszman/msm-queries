<% current_director_id = params.fetch("director_id").to_i %>
<% current_director_data = @director_data.where({ :id => current_director_id })  %>
<% current_director = current_director_data[0]  %>

<h1>
  Director #
  <%=current_director.id%> 
  details
</h1>

<a href="/directors">
  Go back
</a>

<hr>

<dl>
  <dt>
    Name
  </dt>
  <dd>
      <%=current_director.name%> 
  </dd>

  <dt>
    Dob
  </dt>
  <dd>
      <%=current_director.dob%> 
  </dd>

  <dt>
    Bio
  </dt>
  <dd>
      <%=current_director.bio%> 
  </dd>

  <dt>
    Image
  </dt>
  <dd>
    <img src=  <%=current_director.image%>  style="width:250px;">
  </dd>

  <dt>
    Created at
  </dt>
  <dd>
      <%=current_director.created_at%> 
  </dd>

  <dt>
    Updated at
  </dt>
  <dd>
      <%=current_director.updated_at%> 
  </dd>
</dl>

<hr>

<h2>Filmography</h2>

<table border="1">
  <tr>
    <th>
      ID
    </th>

    <th>
      Image
    </th>

    <th>
      Title
    </th>

    <th>
      Year
    </th>

    <th>
      Director
    </th>

    <th>
    </th>
  </tr>

  <% current_movie_data = @movie_data.where({ :director_id => current_director_id })  %>

  <% current_movie_data.each do | current_movie | %>

     <tr>
    <td>
      <%=current_movie.id%>
    </td>

    <td>
      <img src=<%=current_movie.image%> style="width:250px;">
    </td>

    <td>
      <%=current_movie.title%>
    </td>

    <td>
      <%=current_movie.year%>
    </td>

    <td>
      <%=current_director.name%>
    </td>

    <td>
      <a href=<%="/movies/#{current_movie.id}"%>>
        Show details
      </a>
    </td>
  </tr>

  <% end %> 

</table>
